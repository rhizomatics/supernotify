# Delivery Methods

## Built-in Methods

### Mobile Push

Send a push message out, with option for camera integration, mobile actions, and
translate general priority to Apple specific push priority.

Some functionality may also work with Android push, though has not been tested.

Although Supernotify will automatically set most useful mobile push options,
its also possible to directly set them, as in this example:

```yaml
  - action: notify.supernotifier
    data:
      message: Movement at garden gate
      data:
        priority: high
        media:
          camera_entity_id: camera.porch
          camera_ptz_preset: garden_gate
        action_groups:
          - security_actions
        delivery:
          mobile_push:
            data:
              tag: "backyard-motion-detected"
              presentation_options:
                - alert
                - badge
              push:
                sound:
                  name: "US-EN-Alexa-Motion-Detected-Generic.wav"
                  volume: 1.0
```

### Chime

Notify using a sound of your choosing - for example a doorbell, barking dog, siren or recording.
This works with a variety of devices, from cheap 433Mhz doorbell units to Amazon Echo devices.

You can mix and match any of these devices, and also map their different implementations to the
same logical sound using simple alias names, for example `doorbell`. Then within notifications, you
can ask for a doorbell sound and it will generated by each device in its own way. Even if
you don't have a variety of devices, this also keeps complicated chime names (like Amazon
tune paths ) out of your automation code. See the Example code at the bottom of this section.


#### Switch and Siren

Provide a list of `switch`, `siren` entities to use for chimes
and it will call the `switch.turn_on` or `siren.turn_on` calls as appropriate.

Switches are simple binary affairs, however some sirens can also have a choice of tones, volume
level and durations. The following generic chime tunings are passed to the siren.

| Chime Option   | Siren Data Field |
| -------------- | ---------------- |
| chime_tune     | tone             |
| chime_volume   | volume           |
| chime_duration | duration       |


Supernotify passes on the `data` structure exactly as it is on the regular Home Assistant actions,
see the documentation for those integrations below:

- [Siren](https://www.home-assistant.io/integrations/siren/)
- [Switch](https://www.home-assistant.io/integrations/switch/)


Switches are a little special, in that though they are binary on/off in Home Assistant, in
practice even some of the cheap 433Mhz ones can take an additional melody code, its common to
have different melodies represented by separate `switch` entities for the same underlying devices
as in this example Byron device using the [RFLink](https://www.home-assistant.io/integrations/rflink/) integration.

```yaml
- platform: rflink
  devices:
    byron_0000_01:
      name: Chime Tubular
    byron_0000_02:
      name: Chime Morning Dew
    byron_0000_03:
      name: Chime Big Ben
```
#### Scripts

Provide one or more `script` entity IDs, for example, `script.call_bell_api`.

Each script will be called with:

- `message` - from the notification
- `title`   - optional on the notification
- `chime_tune` - name of the chime if supplied
- `chime_duration` - where passed in action data or defined in chime alias
- `chime_volume` - where passed in action data or defined in chime alias

Additional variables can be configured when defining an alias using the `variables` attribute in `data`.

See also [Script](https://www.home-assistant.io/integrations/script/) in HomeAssistant documentation.

#### Alexa Media Player

NOTE: Requires the [`Alexa Media Player`](https://github.com/alandtse/alexa_media_player) integration
to be installed on Home Assistant.

Supply `media_player` entities as targets and this method will make appropriate `media_player.play_media`
action calls to them, passing the sound name provided in `tune` field.

See https://github.com/alandtse/alexa_media_player/wiki#known-available-sounds for
a list of known tunes that work with Alexa devices.

#### Alexa Devices

This supports the newer built-in [Alexa Devices](https://www.home-assistant.io/integrations/alexa_devices/)
integration introduced in 2025.

The list of sounds can be found on the [Alexa API](https://alexa.amazon.com/api/behaviors/entities?skillId=amzn1.ask.1p.sound), after authenticating, or on the [Home Assistant source code](https://github.com/home-assistant/core/blob/dev/homeassistant/components/alexa_devices/strings.json#L105). It includes a generous helping of Halloween specific sounds.

One oddity of this integration is that although it generates traditional entity IDs for notifying Alexa devices,
sending a sound ( or command ) requires a long and obscure `device_id` (a 32 character random hexadecimal pseudo-UUID).
While you can find these from the *Devices* section of the *Alexa Devices* integration config, or using the *Action*
feature of *Developer Tools* and switching to yaml mode, the easiest way is to **automatically register** all Alexa devices by using `device_discovery: True` on the method configuration. (Sometimes you may end up with odd devices like headphones or firesticks
that Alexa knows about but don't make sense for HomeAssistant usage - these can be disabled from the *Alexa Devices* integration config).

#### Example

```yaml
methods:
  chime:
    device_discovery: True
    target:
      - media_player.kitchen_echo
      - media_player.bedroom
      - ffff0000eeee1111dddd2222cccc3333 # Alexa Devices device_id
    options:
        chime_aliases:
              doorbell: #alias
                alexa_devices: # integration domain or label ( if label then domain must be a key in the config )
                    tune: amzn_sfx_cat_meow_1x_01
                media_player:
                    # resolves to media_player/play_media with sound configured for this path
                    tune: home/amzn_sfx_doorbell_chime_02
                    # entity_id list defaults to `target` of method default or action call
                    # this entry can also be shortcut as `media_player: home/amzn_sfx_doorbell_chime_02`
                media_player_alt:
                    # Not all the media players are Amazon Alexa based, so override for other flavours
                    tune: raindrops_and_roses.mp4
                    target:
                        - media_player.hall_custom
                switch:
                    # resolves to switch/turn_on with entity id switch.ding_dong
                    target: switch.chime_ding_dong
                siren_except_bedroom:
                    # resolves to siren/turn_on with tune bleep and default volume/duration
                    tune: bleep
                    domain: siren # domain must be explicit since key is label not domain and no explicit targets
                siren_bedroom:
                    # short and quiet burst for just the bedroom siren
                    domain: siren
                    tune: bleep
                    target: siren.bedroom
                    volume: 0.1
                    duration: 5
                script:
                    target: script.pull_bell_cord
                    data:
                      variables:
                        duration: 25

              red_alert:
                # non-dict defaults to a dict with a single key `tune`
                alexa_devices: scifi/amzn_sfx_scifi_alarm_04
                siren: emergency
```

With this chime config, a doorbell notification can be sent to multiple devices just
by selecting a tune.

```yaml
    - action: notify.supernotify
      data:
        message: ""
        delivery:
            chimes:
                data:
                    chime_tune: doorbell
```


### SMS

This can work with any SMS notification integration by setting the `action` value to match, for example `action: notify.mikrotik_sms`

Uses the `phone_number` attribute of recipient, and truncates message to fit in an SMS.

Since SMS sends a single message with no title, by default the message and title are combined into a single string prior to truncation. Use `title_handling` in an `options` section to change the behaviour, either message only or using the title in place of the message.

### Notify Entity

This method uses the new style Home Assistant notify entities, so accepts only a `message`,
`title` and `target`, plus an optional `data` specific to some entity types. Targets for Notify Entities can be broader than `entity_id`, and can also be a `device`, `label` or `area`, the latter also being an alternate way of calling multiple
notify entities at once..


### Generic

Use to call any actiom, including 'legacy' Notification action (previously known in Home Assistant as 'service' ), that is one not using the newer `NotifyEntity` model.

If action is in `notify` domain, then `message`,`title`,`target` and `data` will be
passed in the Action (Service) Data, otherwise the `data` supplied will be passed directly
as the Action Data.

```yaml
    - action: notify.supernotify
      data:
        title: "My Home Notification"
        message: "Notify via custom chat"
        delivery:
            chat_notify:
                data:
                    channel: 3456
    - action: notify.supernotify
      data:
        delivery:
            mqtt_notify:
                data:
                  topic: alert/family_all
                  payload: something happened
```

### Email

Can be used for plain or HTML template emails, and handle images as attachments or embedded HTML.

Also supports `message_html` override to supply html that will be ignored for other notification
types, and does not require templates. In this case, HTML will automatically be tagged onto the
end to include any attached images.

### Media Image

Show an image on a media player, e.g. an Alexa Show ( where that actually works, depending on model )

### Alexa

Announce, or speak, a notification using Home Assistant's built-in *Alexa Devices* integration.

The `title_handling` option can be set to `combine_message` or `replace_message` to override the default behaviour of speaking the `message`.

*Note* Home Assistant recommend sending multiple notifications to an [Alexa Device Group](https://www.amazon.co.uk/gp/help/customer/display.html?nodeId=GS8URL9U6PW8SPTA), rather than an explicit list of Alexa devices, to minimize the likelihood of Amazon rate-limiting API calls. Home Assistant managed groups work for announcements, but not speaking, and don't have the API efficiency of Alexa's own groups.

When speaking, [SSML](https://developer.amazon.com/en-US/docs/alexa/custom-skills/speech-synthesis-markup-language-ssml-reference.html) is available, for example:

- ```<say-as interpret-as="interjection">bah humbug</say-as>```
- ```<say-as interpret-as='spell-out'>hello</say-as>```
- ```<amazon:emotion name="excited" intensity="high">Activity at front door!</amazon:emotion>```
- ```<amazon:effect name='whispered'>Just a low priority notification</amazon:effect>```
- ```<prosody rate='x-slow'>Saying this slowly</prosody>```
- ```<voice name='Geraint'>hello I'm from Abergavenny</voice>```
- ```<say-as interpret-as='date'>????0922</say-as>``` ( will read as 'September 22nd' )

### Alexa Media Player

Announce a message on an Alexa Echo device using the [`alexa_media_player`](https://github.com/alandtse/alexa_media_player) integration available via [HACS](https://www.hacs.xyz).

The `title_handling` option can be set to `combine_message` or `replace_message` to override the default behaviour of speaking the `message`.

### Persistent

Place a notification on Home Assistant application screen.

Pass a notification ID, either fixed in the method or delivery configuration, or passed in the action `data`.

See the [Home Assistant Integration Documents](https://www.home-assistant.io/integrations/persistent_notification/) for more information.

### MQTT

Whilst [MQTT Notify Entities](https://www.home-assistant.io/integrations/notify.mqtt/) can be used for many cases, and the Supernotify `generic` can be used to send a payload to `mqtt.publish`, the specific MQTT integration can be easier to use.

- Payloads can be defined in YAML rather than escaped JSON, and will be JSONified if needed on delivery
- The action doesn't need to be specified, and the config will validate that a `topic` has been provided.


## Customizing Delivery Methods

### Options

Most methods support an additional set of options, some common ones for handling titles
or suppressing URLs, and some specific to a method.

In this example, image attachments for emails get tuned ( since these are commonly needed, the email
delivery method defaults to always having `progressive` and `optimize` being true, unless explicitly overridden)

```yaml
 email:
        delivery_defaults:
          action: notify.smtp
          options:
            jpeg_opts:
              progressive: true
              optimize: true
              quality: 50
```

### Table of Options

All of these set by passing an `options` block in Delivery config or Method defaults.

|Option           |Methods            |Description                                                  |
|-----------------|-------------------|-------------------------------------------------------------|
|chime_aliases    |chime              |Map tunes to device name or config                           |
|jpeg_opts        |mail               |Tune image grabs                                             |
|title_handling   |all                |Use title rather than message, or combined title and message |
|timestamp        |all                |Add a timestamp to message.                                  |
|target_categories|generic            |Which targets to pass, e.g. `entity_id`,`email`,`other_id`.  |

`jpeg_opts` can also be set per runtime call by passing in the `media` block.
