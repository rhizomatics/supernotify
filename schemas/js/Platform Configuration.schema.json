{
  "type": "object",
  "properties": {
    "platform": {
      "type": "string"
    },
    "name": {
      "type": "string"
    },
    "template_path": {
      "default": "/config/templates/supernotify",
      "type": "string"
    },
    "media_path": {
      "default": "supernotify/media",
      "type": "string"
    },
    "archive": {
      "type": "object",
      "properties": {
        "file_path": {
          "type": "string"
        },
        "enabled": {
          "default": false,
          "type": "string"
        },
        "file_retention_days": {
          "type": "integer",
          "minimum": 0,
          "default": 3
        },
        "mqtt_topic": {
          "type": "string"
        },
        "mqtt_qos": {
          "type": "integer",
          "minimum": 0,
          "default": 0
        },
        "mqtt_retain": {
          "default": true,
          "type": "string"
        }
      },
      "required": [],
      "default": {
        "enabled": false
      }
    },
    "housekeeping": {
      "type": "object",
      "properties": {
        "housekeeping_time": {
          "default": "00:00:01",
          "type": "string"
        }
      },
      "required": [],
      "default": {}
    },
    "dupe_check": {
      "type": "object",
      "properties": {
        "ttl": {
          "type": "integer",
          "minimum": 0
        },
        "size": {
          "type": "integer",
          "minimum": 0,
          "default": 100
        },
        "dupe_policy": {
          "type": "string",
          "enum": [
            "dupe_policy_message_title_same_or_lower_priority",
            "dupe_policy_none"
          ],
          "default": "dupe_policy_message_title_same_or_lower_priority"
        }
      },
      "required": [],
      "default": {}
    },
    "delivery": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "target": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "action": {
            "type": "string"
          },
          "options": {
            "type": "object",
            "additionalProperties": true,
            "default": {}
          },
          "data": {
            "type": "object",
            "additionalProperties": true
          },
          "selection": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "fallback_on_error",
                "scenario",
                "default",
                "fallback"
              ]
            },
            "default": [
              "default"
            ]
          },
          "priority": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "low",
                "medium",
                "high",
                "critical"
              ]
            },
            "default": [
              "low",
              "medium",
              "high",
              "critical"
            ]
          },
          "alias": {
            "type": "string"
          },
          "method": {
            "type": "string",
            "enum": [
              "sms",
              "alexa_devices",
              "alexa_media_player",
              "mobile_push",
              "chime",
              "email",
              "media",
              "persistent",
              "generic"
            ]
          },
          "template": {
            "type": "string"
          },
          "default": {
            "default": false,
            "type": "string"
          },
          "message": {
            "nullable": true,
            "type": "string"
          },
          "title": {
            "nullable": true,
            "type": "string"
          },
          "enabled": {
            "default": true,
            "type": "string"
          },
          "occupancy": {
            "type": "string",
            "enum": [
              "all_in",
              "all_out",
              "any_in",
              "any_out",
              "only_in",
              "only_out",
              "all",
              "none"
            ],
            "default": "all"
          },
          "condition": {
            "nullable": true,
            "type": "string"
          }
        },
        "required": [
          "method"
        ]
      },
      "default": {}
    },
    "action_groups": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "action": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "uri": {
              "type": "string"
            },
            "icon": {
              "type": "string"
            }
          },
          "required": [],
          "additionalProperties": true
        }
      },
      "default": {}
    },
    "recipients": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "person": {
            "type": "string"
          },
          "alias": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "target": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "phone_number": {
            "type": "string"
          },
          "mobile_discovery": {
            "default": true,
            "type": "string"
          },
          "mobile_devices": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "manufacturer": {
                  "type": "string"
                },
                "model": {
                  "type": "string"
                },
                "notify_action": {
                  "type": "string"
                },
                "device_tracker": {
                  "type": "string"
                }
              },
              "required": []
            },
            "default": []
          },
          "delivery": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "target": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "enabled": {
                  "default": true,
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": []
            },
            "default": {}
          }
        },
        "required": [
          "person"
        ]
      },
      "default": []
    },
    "links": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "url",
          "description"
        ]
      },
      "default": []
    },
    "scenarios": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string"
          },
          "condition": {
            "nullable": true,
            "type": "string"
          },
          "media": {
            "type": "object",
            "properties": {
              "camera_entity_id": {
                "type": "string"
              },
              "camera_delay": {
                "type": "integer",
                "default": 0
              },
              "camera_ptz_preset": {
                "anyOf": [
                  {
                    "type": "integer",
                    "minimum": 0
                  },
                  {}
                ]
              },
              "clip_url": {
                "type": "string"
              },
              "snapshot_url": {
                "type": "string"
              },
              "jpeg_opts": {
                "type": "object",
                "additionalProperties": true
              }
            },
            "required": []
          },
          "action_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "delivery_selection": {
            "type": "string",
            "enum": [
              "implicit",
              "explicit"
            ],
            "default": "implicit"
          },
          "delivery": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "target": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                },
                "enabled": {
                  "default": true,
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": [],
              "nullable": true
            },
            "default": {}
          }
        },
        "required": []
      },
      "default": {}
    },
    "methods": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "targets_required": {
            "type": "string"
          },
          "device_domain": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "device_discovery": {
            "type": "string"
          },
          "default": {
            "type": "object",
            "properties": {
              "target": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "action": {
                "type": "string"
              },
              "options": {
                "type": "object",
                "additionalProperties": true,
                "default": {}
              },
              "data": {
                "type": "object",
                "additionalProperties": true
              },
              "selection": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "fallback_on_error",
                    "scenario",
                    "default",
                    "fallback"
                  ]
                },
                "default": [
                  "default"
                ]
              },
              "priority": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "low",
                    "medium",
                    "high",
                    "critical"
                  ]
                },
                "default": [
                  "low",
                  "medium",
                  "high",
                  "critical"
                ]
              }
            },
            "required": []
          }
        },
        "required": []
      },
      "default": {}
    },
    "cameras": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "camera": {
            "type": "string"
          },
          "alt_camera": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "alias": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "device_tracker": {
            "type": "string"
          },
          "ptz_default_preset": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0
              },
              {}
            ],
            "default": 1
          },
          "ptz_delay": {
            "type": "integer",
            "default": 0
          },
          "ptz_method": {
            "type": "string",
            "enum": [
              "onvif",
              "frigate"
            ],
            "default": "onvif"
          }
        },
        "required": [
          "camera"
        ]
      },
      "default": []
    }
  },
  "required": [
    "platform"
  ],
  "additionalProperties": true,
  "title": "Platform Configuration",
  "$id": "https://supernotify.rhizomatics.github.io/schemas/Platform Configuration.json",
  "description": "Voluptuous validation schema for Platform Configuration",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}