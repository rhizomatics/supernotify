{
  "type": "object",
  "properties": {
    "platform": {
      "type": "string"
    },
    "name": {
      "type": "string"
    },
    "template_path": {
      "default": "/config/templates/supernotify",
      "type": "string"
    },
    "media_path": {
      "default": "supernotify/media",
      "type": "string"
    },
    "archive": {
      "type": "object",
      "properties": {
        "file_path": {
          "type": "string"
        },
        "enabled": {
          "default": false,
          "type": "string"
        },
        "file_retention_days": {
          "type": "integer",
          "minimum": 0,
          "default": 3
        },
        "mqtt_topic": {
          "type": "string"
        },
        "mqtt_qos": {
          "type": "integer",
          "minimum": 0,
          "default": 0
        },
        "mqtt_retain": {
          "default": true,
          "type": "string"
        },
        "purge_interval": {
          "type": "integer",
          "minimum": 0,
          "default": 60
        },
        "debug": {
          "default": false,
          "type": "string"
        }
      },
      "required": [],
      "default": {
        "enabled": false
      }
    },
    "housekeeping": {
      "type": "object",
      "properties": {
        "housekeeping_time": {
          "default": "00:00:01",
          "type": "string"
        },
        "media_storage_days": {
          "type": "integer",
          "minimum": 0,
          "default": 7
        }
      },
      "required": [],
      "default": {}
    },
    "dupe_check": {
      "type": "object",
      "properties": {
        "ttl": {
          "type": "integer",
          "minimum": 0
        },
        "size": {
          "type": "integer",
          "minimum": 0,
          "default": 100
        },
        "dupe_policy": {
          "type": "string",
          "enum": [
            "dupe_policy_message_title_same_or_lower_priority",
            "dupe_policy_none"
          ],
          "default": "dupe_policy_message_title_same_or_lower_priority"
        }
      },
      "required": [],
      "default": {}
    },
    "delivery": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "action": {
            "type": "string"
          },
          "debug": {
            "type": "string"
          },
          "options": {
            "type": "object",
            "additionalProperties": true
          },
          "data": {
            "type": "object",
            "additionalProperties": true
          },
          "target": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "entity_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "device_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "area_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "floor_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "label_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "email": {
                    "type": "array",
                    "items": {
                      "format": "email",
                      "type": "string"
                    }
                  },
                  "phone": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "mobile_app_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "person_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [],
                "additionalProperties": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          },
          "target_required": {
            "anyOf": [
              {},
              {
                "type": "string",
                "enum": [
                  "always",
                  "never",
                  "optional"
                ]
              }
            ]
          },
          "target_usage": {
            "type": "string",
            "enum": [
              "no_delivery",
              "no_action",
              "merge_delivery",
              "merge_always",
              "fixed"
            ]
          },
          "selection": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "fallback_on_error",
                "explicit",
                "scenario",
                "default",
                "fallback"
              ]
            }
          },
          "priority": {
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "string"
                },
                {
                  "type": "string",
                  "enum": [
                    "minimum",
                    "low",
                    "medium",
                    "high",
                    "critical"
                  ]
                }
              ]
            }
          },
          "selection_rank": {
            "type": "string",
            "enum": [
              "ANY",
              "FIRST",
              "LAST"
            ]
          },
          "transport": {
            "type": "string",
            "enum": [
              "sms",
              "mqtt",
              "alexa_devices",
              "alexa_media_player",
              "mobile_push",
              "chime",
              "email",
              "media",
              "persistent",
              "tts",
              "generic",
              "notify_entity"
            ]
          },
          "alias": {
            "type": "string"
          },
          "template": {
            "type": "string"
          },
          "message": {
            "nullable": true,
            "type": "string"
          },
          "title": {
            "nullable": true,
            "type": "string"
          },
          "enabled": {
            "type": "string"
          },
          "occupancy": {
            "type": "string",
            "enum": [
              "all_in",
              "all_out",
              "any_in",
              "any_out",
              "only_in",
              "only_out",
              "all",
              "none"
            ],
            "default": "all"
          },
          "condition": {
            "type": "array",
            "items": {
              "nullable": true,
              "type": "string"
            }
          },
          "conditions": {
            "type": "array",
            "items": {
              "nullable": true,
              "type": "string"
            }
          }
        },
        "required": [
          "transport"
        ]
      },
      "default": {}
    },
    "action_groups": {
      "type": "object",
      "additionalProperties": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "action": {
              "type": "string"
            },
            "title": {
              "type": "string"
            },
            "uri": {
              "type": "string"
            },
            "icon": {
              "type": "string"
            }
          },
          "required": [],
          "additionalProperties": true
        }
      },
      "default": {}
    },
    "mobile_discovery": {
      "type": "boolean",
      "default": true
    },
    "recipients_discovery": {
      "type": "boolean",
      "default": true
    },
    "recipients": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "person": {
            "type": "string"
          },
          "alias": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "enabled": {
            "type": "boolean",
            "default": true
          },
          "target": {
            "anyOf": [
              {
                "type": "object",
                "properties": {
                  "entity_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "device_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "area_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "floor_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "label_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "email": {
                    "type": "array",
                    "items": {
                      "format": "email",
                      "type": "string"
                    }
                  },
                  "phone": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "mobile_app_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "person_id": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                },
                "required": [],
                "additionalProperties": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  }
                }
              },
              {
                "type": "string"
              },
              {
                "type": "array",
                "items": {
                  "type": "string"
                }
              }
            ]
          },
          "phone_number": {
            "type": "string"
          },
          "mobile_discovery": {
            "type": "boolean",
            "default": true
          },
          "mobile_devices": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "manufacturer": {
                  "type": "string"
                },
                "model": {
                  "type": "string"
                },
                "class": {
                  "type": "string"
                },
                "mobile_app_id": {
                  "type": "string"
                },
                "device_tracker": {
                  "type": "string"
                },
                "enabled": {
                  "default": true,
                  "type": "string"
                }
              },
              "required": []
            },
            "default": []
          },
          "delivery": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "target": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "entity_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "device_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "area_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "floor_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "label_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "email": {
                          "type": "array",
                          "items": {
                            "format": "email",
                            "type": "string"
                          }
                        },
                        "phone": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "mobile_app_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "person_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [],
                      "additionalProperties": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    {
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  ]
                },
                "enabled": {
                  "nullable": true,
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": []
            },
            "default": {}
          }
        },
        "required": [
          "person"
        ]
      },
      "default": []
    },
    "links": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "id": {
            "type": "string"
          },
          "icon": {
            "type": "string"
          },
          "name": {
            "type": "string"
          }
        },
        "required": [
          "url",
          "description"
        ]
      },
      "default": []
    },
    "scenarios": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string"
          },
          "enabled": {
            "default": true,
            "type": "string"
          },
          "condition": {
            "type": "array",
            "items": {
              "nullable": true,
              "type": "string"
            }
          },
          "conditions": {
            "type": "array",
            "items": {
              "nullable": true,
              "type": "string"
            }
          },
          "media": {
            "type": "object",
            "properties": {
              "camera_entity_id": {
                "type": "string"
              },
              "camera_delay": {
                "type": "integer",
                "default": 0
              },
              "camera_ptz_preset": {
                "anyOf": [
                  {
                    "type": "integer",
                    "minimum": 0
                  },
                  {}
                ]
              },
              "clip_url": {
                "type": "string"
              },
              "snapshot_url": {
                "type": "string"
              },
              "jpeg_opts": {
                "type": "object",
                "additionalProperties": true
              },
              "png_opts": {
                "type": "object",
                "additionalProperties": true
              }
            },
            "required": []
          },
          "action_groups": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "default": []
          },
          "delivery_selection": {
            "type": "string"
          },
          "delivery": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "target": {
                  "anyOf": [
                    {
                      "type": "object",
                      "properties": {
                        "entity_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "device_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "area_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "floor_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "label_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "email": {
                          "type": "array",
                          "items": {
                            "format": "email",
                            "type": "string"
                          }
                        },
                        "phone": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "mobile_app_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "person_id": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        }
                      },
                      "required": [],
                      "additionalProperties": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    {
                      "type": "string"
                    },
                    {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  ]
                },
                "enabled": {
                  "nullable": true,
                  "type": "string"
                },
                "data": {
                  "type": "object",
                  "additionalProperties": true
                }
              },
              "required": [],
              "nullable": true
            },
            "default": {}
          }
        },
        "required": []
      },
      "default": {}
    },
    "transports": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "properties": {
          "alias": {
            "type": "string"
          },
          "device_domain": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "device_model_include": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "device_model_exclude": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "device_discovery": {
            "type": "string"
          },
          "enabled": {
            "default": true,
            "type": "string"
          },
          "delivery_defaults": {
            "type": "object",
            "properties": {
              "action": {
                "type": "string"
              },
              "debug": {
                "type": "string"
              },
              "options": {
                "type": "object",
                "additionalProperties": true
              },
              "data": {
                "type": "object",
                "additionalProperties": true
              },
              "target": {
                "anyOf": [
                  {
                    "type": "object",
                    "properties": {
                      "entity_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "device_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "area_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "floor_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "label_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "email": {
                        "type": "array",
                        "items": {
                          "format": "email",
                          "type": "string"
                        }
                      },
                      "phone": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "mobile_app_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      },
                      "person_id": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        }
                      }
                    },
                    "required": [],
                    "additionalProperties": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  },
                  {
                    "type": "string"
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                ]
              },
              "target_required": {
                "anyOf": [
                  {},
                  {
                    "type": "string",
                    "enum": [
                      "always",
                      "never",
                      "optional"
                    ]
                  }
                ]
              },
              "target_usage": {
                "type": "string",
                "enum": [
                  "no_delivery",
                  "no_action",
                  "merge_delivery",
                  "merge_always",
                  "fixed"
                ]
              },
              "selection": {
                "type": "array",
                "items": {
                  "type": "string",
                  "enum": [
                    "fallback_on_error",
                    "explicit",
                    "scenario",
                    "default",
                    "fallback"
                  ]
                }
              },
              "priority": {
                "type": "array",
                "items": {
                  "anyOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "type": "string"
                    },
                    {
                      "type": "string",
                      "enum": [
                        "minimum",
                        "low",
                        "medium",
                        "high",
                        "critical"
                      ]
                    }
                  ]
                }
              },
              "selection_rank": {
                "type": "string",
                "enum": [
                  "ANY",
                  "FIRST",
                  "LAST"
                ]
              }
            },
            "required": []
          }
        },
        "required": []
      },
      "default": {}
    },
    "cameras": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "camera": {
            "type": "string"
          },
          "alt_camera": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "alias": {
            "type": "string"
          },
          "url": {
            "type": "string"
          },
          "device_tracker": {
            "type": "string"
          },
          "ptz_camera": {
            "type": "string"
          },
          "ptz_default_preset": {
            "anyOf": [
              {
                "type": "integer",
                "minimum": 0
              },
              {
                "type": "string"
              }
            ],
            "default": 1
          },
          "ptz_delay": {
            "type": "integer",
            "default": 0
          },
          "ptz_method": {
            "type": "string",
            "enum": [
              "onvif",
              "frigate"
            ],
            "default": "onvif"
          }
        },
        "required": [
          "camera"
        ]
      },
      "default": []
    }
  },
  "required": [
    "platform"
  ],
  "additionalProperties": true,
  "title": "Platform Configuration",
  "$id": "https://supernotify.rhizomatics.github.io/developer/schemas/Platform_Configuration.json",
  "description": "Voluptuous validation schema for Platform_Configuration",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}